{"ast":null,"code":"/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from '@angular/core';\nimport { deepFind } from 'utils';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ng-zorro-antd/table\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"share/common/resize/resize.component\";\nimport * as i4 from \"ng-zorro-antd/tooltip\";\nimport * as i5 from \"share/customize/job-badge/job-badge.component\";\nimport * as i6 from \"share/customize/task-badge/task-badge.component\";\nimport * as i7 from \"ng-zorro-antd/icon\";\nimport * as i8 from \"../../../../share/pipes/humanize-date.pipe\";\nimport * as i9 from \"../../../../share/pipes/humanize-duration.pipe\";\nimport * as i10 from \"share/pipes/humanize-bytes.pipe\";\n\nfunction JobOverviewListComponent_tr_27_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"humanizeBytes\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const node_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, node_r4.detail == null ? null : node_r4.detail.metrics[\"read-bytes\"]), \" \");\n  }\n}\n\nfunction JobOverviewListComponent_tr_27_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const node_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, node_r4.detail == null ? null : node_r4.detail.metrics[\"read-records\"], \"1.0-0\"), \" \");\n  }\n}\n\nfunction JobOverviewListComponent_tr_27_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"humanizeBytes\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const node_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, node_r4.detail == null ? null : node_r4.detail.metrics[\"write-bytes\"]), \" \");\n  }\n}\n\nfunction JobOverviewListComponent_tr_27_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const node_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, node_r4.detail == null ? null : node_r4.detail.metrics[\"write-records\"], \"1.0-0\"), \" \");\n  }\n}\n\nfunction JobOverviewListComponent_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 9);\n    i0.ɵɵlistener(\"click\", function JobOverviewListComponent_tr_27_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const node_r4 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.clickNode(node_r4);\n    });\n    i0.ɵɵelementStart(1, \"td\", 10);\n    i0.ɵɵelementStart(2, \"a\", 11);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵelement(5, \"flink-job-badge\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtemplate(7, JobOverviewListComponent_tr_27_span_7_Template, 3, 3, \"span\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtemplate(9, JobOverviewListComponent_tr_27_span_9_Template, 3, 4, \"span\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtemplate(11, JobOverviewListComponent_tr_27_span_11_Template, 3, 3, \"span\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtemplate(13, JobOverviewListComponent_tr_27_span_13_Template, 3, 4, \"span\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"humanizeDate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"humanizeDuration\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"td\");\n    i0.ɵɵtext(23);\n    i0.ɵɵpipe(24, \"humanizeDate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"td\", 14);\n    i0.ɵɵelement(26, \"flink-task-badge\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const node_r4 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n\n    const _r2 = i0.ɵɵreference(30);\n\n    i0.ɵɵclassProp(\"selected\", (ctx_r1.selectedNode == null ? null : ctx_r1.selectedNode.id) === node_r4.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"selected\", (ctx_r1.selectedNode == null ? null : ctx_r1.selectedNode.id) === node_r4.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"nzTooltipTitle\", node_r4.detail == null ? null : node_r4.detail.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(node_r4.detail == null ? null : node_r4.detail.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"state\", node_r4.detail == null ? null : node_r4.detail.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", node_r4.detail == null ? null : node_r4.detail.metrics[\"read-bytes-complete\"])(\"ngIfElse\", _r2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", node_r4.detail == null ? null : node_r4.detail.metrics[\"read-records-complete\"])(\"ngIfElse\", _r2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", node_r4.detail == null ? null : node_r4.detail.metrics[\"write-bytes-complete\"])(\"ngIfElse\", _r2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", node_r4.detail == null ? null : node_r4.detail.metrics[\"write-records-complete\"])(\"ngIfElse\", _r2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(node_r4.parallelism);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(18, 22, node_r4.detail[\"start-time\"], \"yyyy-MM-dd HH:mm:ss\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(21, 25, node_r4.detail == null ? null : node_r4.detail.duration));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(24, 27, node_r4.detail[\"end-time\"], \"yyyy-MM-dd HH:mm:ss\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"selected\", (ctx_r1.selectedNode == null ? null : ctx_r1.selectedNode.id) === node_r4.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"tasks\", node_r4.detail == null ? null : node_r4.detail.tasks);\n  }\n}\n\nfunction JobOverviewListComponent_ng_template_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 16);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    x: a0\n  };\n};\n\nexport let JobOverviewListComponent = /*#__PURE__*/(() => {\n  class JobOverviewListComponent {\n    constructor(elementRef) {\n      this.elementRef = elementRef;\n      this.innerNodes = [];\n      this.left = 390;\n      this.nodeClick = new EventEmitter();\n      this.sortStatusFn = this.sortFn('detail.status');\n      this.sortReadBytesFn = this.sortFn('detail.metrics.read-bytes');\n      this.sortReadRecordsFn = this.sortFn('detail.metrics.read-records');\n      this.sortWriteBytesFn = this.sortFn('detail.metrics.write-bytes');\n      this.sortWriteRecordsFn = this.sortFn('detail.metrics.write-records');\n      this.sortParallelismFn = this.sortFn('parallelism');\n      this.sortStartTimeFn = this.sortFn('detail.start-time');\n      this.sortDurationFn = this.sortFn('detail.duration');\n      this.sortEndTimeFn = this.sortFn('detail.end-time');\n    }\n\n    set nodes(value) {\n      this.innerNodes = value;\n    }\n\n    get nodes() {\n      return this.innerNodes;\n    }\n\n    sortFn(path) {\n      return (pre, next) => deepFind(pre, path) > deepFind(next, path) ? 1 : -1;\n    }\n\n    trackJobBy(_, node) {\n      return node.id;\n    }\n\n    clickNode(node) {\n      this.nodeClick.emit(node);\n    }\n\n  }\n\n  JobOverviewListComponent.ɵfac = function JobOverviewListComponent_Factory(t) {\n    return new (t || JobOverviewListComponent)(i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n\n  JobOverviewListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: JobOverviewListComponent,\n    selectors: [[\"flink-job-overview-list\"]],\n    inputs: {\n      selectedNode: \"selectedNode\",\n      nodes: \"nodes\"\n    },\n    outputs: {\n      nodeClick: \"nodeClick\"\n    },\n    decls: 31,\n    vars: 22,\n    consts: [[1, \"no-border\", \"small\", 3, \"nzSize\", \"nzData\", \"nzScroll\", \"nzFrontPagination\", \"nzShowPagination\"], [\"table\", \"\"], [\"nzLeft\", \"0px\", 3, \"nzWidth\"], [\"nzWidth\", \"120px\", 3, \"nzSortFn\"], [\"nzWidth\", \"150px\", 3, \"nzSortFn\"], [\"nzWidth\", \"100px\", \"nzRight\", \"0px\"], [\"class\", \"clickable\", 3, \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"left\", \"baseElement\", \"resizeMin\", \"leftChange\"], [\"loadingTemplate\", \"\"], [1, \"clickable\", 3, \"click\"], [\"nzLeft\", \"0px\", 1, \"name\"], [\"nzTooltipPlacement\", \"topLeft\", \"nz-tooltip\", \"\", 3, \"nzTooltipTitle\"], [3, \"state\"], [4, \"ngIf\", \"ngIfElse\"], [\"nzRight\", \"0px\"], [3, \"tasks\"], [\"nz-icon\", \"\", \"nzType\", \"loading\"]],\n    template: function JobOverviewListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"nz-table\", 0, 1);\n        i0.ɵɵelementStart(2, \"thead\");\n        i0.ɵɵelementStart(3, \"tr\");\n        i0.ɵɵelementStart(4, \"th\", 2);\n        i0.ɵɵtext(5, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"th\", 3);\n        i0.ɵɵtext(7, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"th\", 4);\n        i0.ɵɵtext(9, \"Bytes Received\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"th\", 4);\n        i0.ɵɵtext(11, \"Records Received\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"th\", 4);\n        i0.ɵɵtext(13, \"Bytes Sent\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"th\", 3);\n        i0.ɵɵtext(15, \"Records Sent\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\", 3);\n        i0.ɵɵtext(17, \"Parallelism\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\", 4);\n        i0.ɵɵtext(19, \"Start Time\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"th\", 4);\n        i0.ɵɵtext(21, \"Duration\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"th\", 4);\n        i0.ɵɵtext(23, \"End Time\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"th\", 5);\n        i0.ɵɵtext(25, \"Tasks\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"tbody\");\n        i0.ɵɵtemplate(27, JobOverviewListComponent_tr_27_Template, 27, 30, \"tr\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"flink-resize\", 7);\n        i0.ɵɵlistener(\"leftChange\", function JobOverviewListComponent_Template_flink_resize_leftChange_28_listener($event) {\n          return ctx.left = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(29, JobOverviewListComponent_ng_template_29_Template, 1, 0, \"ng-template\", null, 8, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(1);\n\n        i0.ɵɵproperty(\"nzSize\", \"small\")(\"nzData\", ctx.nodes)(\"nzScroll\", i0.ɵɵpureFunction1(20, _c0, 1360 + ctx.left + \"px\"))(\"nzFrontPagination\", false)(\"nzShowPagination\", false);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"nzWidth\", ctx.left + \"px\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"nzSortFn\", ctx.sortStatusFn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"nzSortFn\", ctx.sortReadBytesFn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"nzSortFn\", ctx.sortReadRecordsFn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"nzSortFn\", ctx.sortWriteBytesFn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"nzSortFn\", ctx.sortWriteRecordsFn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"nzSortFn\", ctx.sortParallelismFn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"nzSortFn\", ctx.sortStartTimeFn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"nzSortFn\", ctx.sortDurationFn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"nzSortFn\", ctx.sortEndTimeFn);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", _r0.data)(\"ngForTrackBy\", ctx.trackJobBy);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"left\", ctx.left)(\"baseElement\", ctx.elementRef)(\"resizeMin\", 390);\n      }\n    },\n    directives: [i1.NzTableComponent, i1.NzTheadComponent, i1.NzTrDirective, i1.NzTableCellDirective, i1.NzThMeasureDirective, i1.NzCellFixedDirective, i1.NzThAddOnComponent, i1.NzTbodyComponent, i2.NgForOf, i3.ResizeComponent, i4.NzTooltipDirective, i5.JobBadgeComponent, i2.NgIf, i6.TaskBadgeComponent, i7.NzIconDirective],\n    pipes: [i8.HumanizeDatePipe, i9.HumanizeDurationPipe, i10.HumanizeBytesPipe, i2.DecimalPipe],\n    styles: [\"[_nghost-%COMP%]{display:block;position:relative}.name[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{overflow:hidden}.name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:absolute;display:inline-block;width:calc(100% - 12px);line-height:34px;top:0;left:8px;white-space:nowrap;text-overflow:ellipsis}.selected[_ngcontent-%COMP%]{color:rgba(0,0,0,.85)}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#e6f7ff}\"],\n    changeDetection: 0\n  });\n  return JobOverviewListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}