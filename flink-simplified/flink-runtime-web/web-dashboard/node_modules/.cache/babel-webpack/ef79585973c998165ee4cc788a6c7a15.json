{"ast":null,"code":"\"use strict\";\n\nvar _ = require(\"../lodash\");\n\nvar util = require(\"../util\");\n\nvar positionX = require(\"./bk\").positionX;\n\nmodule.exports = position;\n\nfunction position(g) {\n  g = util.asNonCompoundGraph(g);\n  positionY(g);\n\n  _.forEach(positionX(g), function (x, v) {\n    g.node(v).x = x;\n  });\n}\n\nfunction positionY(g) {\n  var layering = util.buildLayerMatrix(g);\n  var rankSep = g.graph().ranksep;\n  var prevY = 0;\n\n  _.forEach(layering, function (layer) {\n    var maxHeight = _.max(_.map(layer, function (v) {\n      return g.node(v).height;\n    }));\n\n    _.forEach(layer, function (v) {\n      g.node(v).y = prevY + maxHeight / 2;\n    });\n\n    prevY += maxHeight + rankSep;\n  });\n}","map":null,"metadata":{},"sourceType":"script"}